<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/bootstrap.min.css' />
</head>
<body>

<script>
    document.addEventListener('DOMContentLoaded',function() {

       document.querySelector('button').addEventListener('click',function(){
           var username = document.querySelector('.username').value;
           var password = document.querySelector('.password').value;
           var jsonObj = {
               username: username,
               password: password
           }

           var xhr = new XMLHttpRequest();
           xhr.open('POST', '/register');
           xhr.setRequestHeader('accept', 'application/json');
           xhr.setRequestHeader('content-type', 'application/json');
           xhr.addEventListener('readystatechange', function() {
               if(xhr.readyState === 4 && xhr.status === 201) {
                   var obj = JSON.parse(xhr.responseText);
                   console.log(obj);

                   document.querySelector('.content').innerHTML = 'You have successfully registered! Your username is ' + obj.user.username;
               }
           });

           xhr.send(JSON.stringify(jsonObj));
       })

    })




</script>
<div class="col-lg-4"></div>
<div class="col-lg-4">
    <h2 class="text-center">REGISTRATION</h2>
    <div>
        <label>Username:</label>
        <input  class="form-control username" type="text" name="username"/>
    </div>
    <div>
        <label>Password:</label>
        <input  class="form-control password" type="password" name="password"/>
    </div>

    <button class="btn btn-primary col-lg-12 register">Register</button>
<br><br>
<div class="content text-center text-success"></div>
<br>
<a href="/" class="btn btn-sm btn-danger">go back HOME</a>
</div>
<div class="col-lg-4"></div>
</body>
</html>